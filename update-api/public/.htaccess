RewriteEngine On

# Block direct access to .php files except via rewrite rules and allow api.php
<Files "api.php">
    Order allow,deny
    Allow from all
</Files>
<FilesMatch "\.php$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Serve existing files and directories as-is (except .php)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Rewrite /login to /login.php so /login works as the login URL
RewriteRule ^login$ login.php [L]

# Route all requests to index.php for the PHP router
RewriteRule ^ index.php [L]
